import{m as t}from"./vuex-fb1740e5.js";import{P as e,S as i,a as s}from"./app-cf52f51d.js";import{n as a}from"./vue-verify-code-21b6e9ae.js";import"./w-e6fba1f3.js";import"./axios-5ae1da96.js";import"./vue-9f7ddc78.js";import"./async-validator-68c927eb.js";import"./babel-runtime-b0e6bb14.js";import"./crypto-js-e93d4fbc.js";import"./element-tiptap-f39d3908.js";import"./tiptap-cd99e86f.js";import"./prosemirror-state-aff6b6a5.js";import"./prosemirror-model-e99bf1dc.js";import"./orderedmap-1ac72264.js";import"./prosemirror-transform-0ba15ba3.js";import"./prosemirror-view-e30b2d7a.js";import"./prosemirror-dropcursor-41f27ba8.js";import"./prosemirror-gapcursor-8cdc000d.js";import"./prosemirror-keymap-e0a1e6d1.js";import"./w3c-keyname-5afe5a41.js";import"./prosemirror-commands-994280f1.js";import"./prosemirror-inputrules-51b7290b.js";import"./tiptap-utils-1e7277fa.js";import"./tiptap-extensions-b74a4f9a.js";import"./tiptap-commands-9e395e16.js";import"./prosemirror-schema-list-a2d0a333.js";import"./highlight.js-45c9f23d.js";import"./fault-4bc10d66.js";import"./format-ca30c10a.js";import"./prosemirror-history-094ab62a.js";import"./rope-sequence-72d4f3ff.js";import"./prosemirror-utils-15148092.js";import"./prosemirror-tables-78b83e4c.js";import"./element-ui-85fcec33.js";import"./resize-observer-polyfill-26170312.js";import"./throttle-debounce-f2d3495b.js";import"./babel-helper-vue-jsx-merge-props-ae7f6986.js";import"./normalize-wheel-2c441d7d.js";import"./deepmerge-1c41bee1.js";import"./image-conversion-5dc521cd.js";import"./nprogress-e46a079b.js";import"./vue-cookie-f9b70f6c.js";import"./tiny-cookie-01c919d1.js";import"./moment-0b360bb8.js";/* empty css                     */import"./xgplayer-ddb6d22b.js";import"./eventemitter3-91a3dd57.js";import"./delegate-333e72eb.js";import"./downloadjs-bf7647fe.js";import"./xgplayer-hls-e482b1c5.js";import"./xgplayer-streaming-shared-a05e1a43.js";import"./xgplayer-transmuxer-2825904a.js";import"./xgplayer-music-47c62e3d.js";import"./vue-router-29840f2f.js";import"./vue-axios-5ff5ffea.js";import"./qs-7cd75b61.js";import"./side-channel-c3af32fe.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-d5fba9a3.js";const r=a({computed:{...t({tableHeight:t=>t.tableHeight})},data:()=>({loading:!1,button:{loading:!1,disable:!1,text:"提 交"},form:{},configs:null,weiPays:null,aliPays:null,active:"base",weiSelect:[],aliSelect:[],weiNames:[],aliNames:[]}),activated(){this.tree()},methods:{tree(){this.loading=!0,e().then((t=>{0===t.status&&(this.weiPays=t.data.wei,this.aliPays=t.data.ali,this.config())}))},async config(){await this.$func.verify("setting.list"),i(this.params).then((t=>{t.status?this.$func.error(t.message):(this.configs=t.data,this.weiSelect=[],this.aliSelect=[],this.weiNames=[],this.aliNames=[],this.configs.forEach((t=>{t.children.forEach((t=>{"channel_wechat"==t.name&&(this.weiSelect=t.value?t.value.split("\n"):[],this.weiSelect.forEach((t=>{this.weiPays.forEach((e=>{e.name==t&&this.weiNames.push(e.title)}))}))),"channel_alipay"==t.name&&(this.aliSelect=t.value?t.value.split("\n"):[],this.aliSelect.forEach((t=>{this.aliPays.forEach((e=>{e.name==t&&this.aliNames.push(e.title)}))}))),this.$set(this.form,t.name,t.value)}))}))),this.loading=!1})).catch((t=>{this.loading=!1}))},async update(){await this.$func.verify("setting.save"),this.$refs.form.validate((t=>{t&&(this.button.disabled=!0,this.button.loading=!0,this.button.text="提交中...",s(this.form).then((t=>{t.status?this.$func.error(t.message):this.$func.success(t.message),this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"})).catch((t=>{this.button.disabled=!1,this.button.loading=!1,this.button.text="提 交"})))}))},selectPay(t,e,i){"wei"==i&&(this.weiNames.length<10?(this.weiNames.push(t),this.weiSelect.push(e),this.form.channel_wechat=this.weiSelect.join("\n")):this.$func.error("最多只能添加10个")),"ali"==i&&(this.aliNames.length<10?(this.aliNames.push(t),this.aliSelect.push(e),this.form.channel_alipay=this.aliSelect.join("\n")):this.$func.error("最多只能添加10个"))},closePay(t,e){"wei"==t&&(this.weiNames.splice(e,1),this.weiSelect.splice(e,1),this.form.channel_wechat=this.weiSelect.join("\n")),"ali"==t&&(this.aliNames.splice(e,1),this.aliSelect.splice(e,1),this.form.channel_alipay=this.aliSelect.join("\n"))},uploadSuccess(t,e,i){this.uploadLoading.close(),t.status?this.$func.error(t.message):this.form[i]=t.data},uploadBefore(t){return t.size/1024/1024<2?(this.uploadLoading=this.$loading({lock:!0,spinner:"el-icon-loading",text:"上传中...",background:"rgba(0, 0, 0, 0.7)"}),!0):(this.$func.error("上传的图片不能大于2M"),!1)}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"board-content"},[e("div",{staticClass:"board-main"},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",staticClass:"board-form",attrs:{model:t.form,"label-width":"150px"}},[e("el-tabs",{attrs:{type:"card"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.configs,(function(i,s){return e("el-tab-pane",{key:s,attrs:{label:i.title,name:i.name}},[e("div",{staticClass:"board-scroll"},[t._l(i.children,(function(i,s){return e("el-form-item",{key:s,attrs:{label:i.title+":",prop:i.name}},["number"==i.type||"string"==i.type?e("el-input",{attrs:{size:"medium","prefix-icon":"fa fa-"+i.icon},model:{value:t.form[i.name],callback:function(e){t.$set(t.form,i.name,e)},expression:"form[child.name]"}},[i.unit?e("template",{slot:"append"},[t._v(t._s(i.unit))]):t._e()],2):t._e(),"boole"==i.type?e("el-radio-group",{attrs:{size:"small"},model:{value:t.form[i.name],callback:function(e){t.$set(t.form,i.name,e)},expression:"form[child.name]"}},t._l(i.rule,(function(i,s){return e("el-radio-button",{key:s,attrs:{label:Number(s)}},[t._v(t._s(i))])})),1):t._e(),"textarea"==i.type?e("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.form[i.name],callback:function(e){t.$set(t.form,i.name,e)},expression:"form[child.name]"}}):t._e(),"transfer"==i.type?e("div",["channel_wechat"==i.name?e("div",[e("div",{staticClass:"payment-select"},t._l(t.weiNames,(function(i,s){return e("el-tag",{key:s,staticClass:"select-tag",attrs:{type:"danger",closable:"",size:"medium"},on:{close:function(e){return t.closePay("wei",s)}}},[t._v(" "+t._s(i)+" ")])})),1),e("div",{staticClass:"payment-pool"},t._l(t.weiPays,(function(i,s){return e("el-tag",{key:s,class:i.code?"pool-tag tag-code":"pool-tag",attrs:{alt:"点我选择",title:"点我选择",size:"medium"},on:{click:function(e){return t.selectPay(i.title,i.name,"wei")}}},[t._v(" "+t._s(i.title)+" ")])})),1)]):t._e(),"channel_alipay"==i.name?e("div",[e("div",{staticClass:"payment-select"},t._l(t.aliNames,(function(i,s){return e("el-tag",{key:s,staticClass:"select-tag",attrs:{type:"danger",closable:"",size:"medium"},on:{close:function(e){return t.closePay("ali",s)}}},[t._v(" "+t._s(i)+" ")])})),1),e("div",{staticClass:"payment-pool"},t._l(t.aliPays,(function(i,s){return e("el-tag",{key:s,class:i.code?"pool-tag tag-code":"pool-tag",attrs:{alt:"点我选择",title:"点我选择"},on:{click:function(e){return t.selectPay(i.title,i.name,"ali")}}},[t._v(" "+t._s(i.title)+" ")])})),1)]):t._e()]):t._e(),i.remark?e("div",{staticClass:"board-form_tip"},[e("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "+t._s(i.remark)+" ")]):t._e()],1)})),e("el-form-item",{staticClass:"form-button"},[e("el-button",{attrs:{type:"primary",loading:t.button.loading,disabled:t.button.disable},on:{click:t.update}},[t._v(t._s(t.button.text))])],1)],2)])})),1)],1)],1)])}),[],!1,null,"78289f3c",null,null).exports;export{r as default};
